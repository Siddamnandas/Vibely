:root {
  /* Spacing tokens for bottom nav + mini player */
  --nav-height: 80px; /* Updated at runtime by BottomNav ResizeObserver */
  --nav-gap: 16px; /* Breathing room above nav */
  --mini-height: 68px; /* Mini Player height - responsive */
  --mini-icon: 44px; /* Diameter of play/pause button in Mini Player - responsive */
  --mini-border-radius: 20px; /* Border radius - responsive */
  
  /* Orientation-specific variables */
  --current-orientation: portrait; /* Updated by orientation service */
  --screen-width: 100vw;
  --screen-height: 100vh;
  
  /* Responsive spacing */
  --content-padding: 16px;
  --mini-side-margin: 16px;
  --mini-left: var(--mini-side-margin);
  --mini-right: var(--mini-side-margin);
  
  /* Orientation-specific offsets */
  --mini-portrait-offset: 12px;
  --mini-landscape-offset: 8px;
  
  /* Derived offset used to anchor Mini Player safely above the nav + safe-area */
  --mini-offset-bottom: calc(
    var(--nav-height, 80px) + var(--nav-gap, 16px) + env(safe-area-inset-bottom, 0px)
  );

  /* Full Player backdrop tokens */
  --backdrop-alpha: 0.35; /* 0.25â€“0.5 range */
  --backdrop-blur: 6px; /* 0 to disable blur */

  /* Mini Player glow tokens */
  --mini-glow-opacity: 0.28;
  --mini-glow-size: 140%;
  --mini-glow-speed: 14s;
  --mini-glow-colora: #9fffa233; /* green alpha */
  --mini-glow-colorb: #ff6f9133; /* pink alpha */
}

/* Mini Player playing-state glow */
.mini--playing {
  background-image: radial-gradient(circle at 30% 20%, var(--mini-glow-colora), transparent 60%),
    radial-gradient(circle at 70% 80%, var(--mini-glow-colorb), transparent 60%);
  background-size: var(--mini-glow-size) var(--mini-glow-size);
  background-blend-mode: screen;
  opacity: var(--mini-glow-opacity);
  animation: miniGlow var(--mini-glow-speed) linear infinite alternate;
}

@keyframes miniGlow {
  0% {
    background-position:
      0% 0%,
      100% 100%;
  }
  100% {
    background-position:
      100% 0%,
      0% 100%;
  }
}

/* Orientation-specific responsive design */
.orientation-landscape {
  --mini-height: 56px;
  --mini-icon: 40px;
  --nav-gap: 12px;
  --mini-border-radius: 16px;
  --content-padding: 12px;
  --mini-side-margin: 12px;
}

.orientation-portrait {
  --mini-height: 68px;
  --mini-icon: 44px;
  --nav-gap: 16px;
  --mini-border-radius: 20px;
  --content-padding: 16px;
  --mini-side-margin: 16px;
}

/* Small screen adjustments */
@media (max-width: 375px) {
  .orientation-landscape {
    --content-padding: 8px;
    --mini-side-margin: 8px;
    --mini-height: 52px;
    --mini-icon: 36px;
  }
  
  .orientation-portrait {
    --content-padding: 12px;
    --mini-side-margin: 12px;
  }
}

/* Large screen optimizations */
@media (min-width: 414px) {
  .orientation-landscape {
    --content-padding: 16px;
    --mini-side-margin: 16px;
  }
  
  .orientation-portrait {
    --content-padding: 20px;
    --mini-side-margin: 20px;
  }
}

/* Safe area handling for different orientations */
@supports (padding: env(safe-area-inset-bottom)) {
  .orientation-landscape {
    --mini-offset-bottom: calc(
      var(--nav-height, 80px) + var(--nav-gap, 12px) + 
      max(env(safe-area-inset-bottom, 0px), var(--mini-landscape-offset, 8px))
    );
  }
  
  .orientation-portrait {
    --mini-offset-bottom: calc(
      var(--nav-height, 80px) + var(--nav-gap, 16px) + 
      max(env(safe-area-inset-bottom, 0px), var(--mini-portrait-offset, 12px))
    );
  }
}

/* Feature flag to disable glow */
.mini--glow-off {
  background-image: none !important;
  animation: none !important;
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce) {
  .mini--playing {
    animation: none;
    opacity: 0.15; /* static subtle glow */
  }
  .full-player-backdrop {
    backdrop-filter: none;
    transition: opacity 0.2s ease-out;
  }
}
